<mvc:View controllerName="emwebapp.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns="sap.m">
    <Page 
        id="page" 
        title="Event Mesh Messenger Application for {/loggedInUser/firstname} {/loggedInUser/lastname}" 
        titleAlignment="Center">
        <content>
            <l:FixFlex id='fixFlex' fixContentSize='75%'>
                <l:fixContent>
                <ScrollContainer height="100%" vertical='true'>
                    <l:Grid 
                        id='grid'
                        vSpacing="0" 
                        content= "{path: '/messages', factory: '.createFeed'}"
                        defaultSpan="XL12 L12 M12 S12"
                        class="sapUiMediumMargin"
                    >
                    </l:Grid>
                </ScrollContainer>
                </l:fixContent>
                <l:flexContent>
                    <l:Grid
                        defaultSpan="XL12 L12 M12 S12"
                        class="sapUiMediumMargin inputGridContainer"
                    >
                        <FlexBox 
                            id='typingIndicatorFlexBox'
                            height="20px"
                            class='typingIndicator sapUiSmallMarginTop'
                        >
                            <items>
                                 <core:HTML
                                    content="&lt;div class='ticontainer sapUiTinyMarginEnd'&gt;&lt;div class='tiblock'&gt;&lt;div class='tidot'&gt;&lt;/div&gt;&lt;div class='tidot'&gt;&lt;/div&gt;&lt;div class='tidot'&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;"
                                />
                                <Text
                                    id='typingIndicatorPerson'
                                    text="{path: '/typing/personTyping'}"
                                />
                            </items>
                        </FlexBox>
                        <Input
                            id='input'
                            width='100%'
                            liveChange='onLiveChange'
                            submit='onSendMessage'
                        >
                            <layoutData>
                                <l:GridData span="XL12 L12 M12 S12"/>
                            </layoutData>   
                        </Input>
                    </l:Grid>
                </l:flexContent>
            </l:FixFlex>
        </content>
    </Page>
</mvc:View>